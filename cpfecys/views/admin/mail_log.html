{{extend 'dashboard.html'}}
<div class="row mt-4">
  <div class="col-12 text-center">
    <h2>Historial de correos</h2>
  </div>
  <div class="well col-12">
    <a onclick="window.history.back()" class="btn btn-primary"
      ><i class="icon-arrow-left"></i>{{=T('Back')}}</a
    >
    <a
      class="btn btn-success pull-right"
      onclick="tableToExcel('mail-log','');"
    >
      <i class="icon-download icon-white"></i>
      {{=T('Excel (XLS)')}}
    </a>
    <div class="table-responsive">
      <table id="mail-log" class="table table-striped table-bordered">
        <thead>
          <tr>
            <th scope="col">Roles</th>
            <th scope="col">Fecha de enviado</th>
            <th scope="col">Mensaje</th>
            <th scope="col">Proyectos</th>
          </tr>
        </thead>
        <tbody>
          {{for log in logs:}}
          <tr>
            <td>{{=log.roles}}</td>
            <td>{{=log.sent}}</td>
            <td style="width: fit-content; white-space: pre-line">
              <p class="dtt-messagelog">{{=log.sent_message}}</p>
            </td>

            <td>
              <a
                class="btn btn-primary"
                data-toggle="modal"
                data-target="#modal-comment-{{=log.id}}"
                data-placement="top"
              >
                {{=T('View projects')}}
              </a>
              <div
                class="modal hide fade modal-comment"
                id="modal-comment-{{=log.id}}"
                tabindex="-1"
                role="dialog"
                aria-labelledby="exampleModalLabel"
                aria-hidden="true"
              >
                <div class="modal-dialog" role="document">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="exampleModalLabel">
                        {{=T('Projects list')}}
                      </h5>
                      <button
                        type="button"
                        class="close"
                        data-dismiss="modal"
                        aria-label="Close"
                      >
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <div class="modal-body">
                      <p class="d-flex" style="white-space: normal">
                        {{=log.projects}}
                      </p>
                    </div>
                    <div class="modal-footer">
                      <button
                        type="button"
                        class="btn btn-secondary"
                        data-dismiss="modal"
                      >
                        Cerrar
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </td>
          </tr>
          {{pass}}
        </tbody>
      </table>
    </div>
  </div>
</div>
