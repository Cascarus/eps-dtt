{{extend 'dashboard.html'}}

<!-- log-final-metrics-activity -->
{{inc_vars = dict(
                id='log-final-statistics',
                url=URL('final/save', vars=dict(report=report.id)),
                date='',
                alumnos_actas='',
                alumnos_parciales='',
                alumnos_final='',
                alumnos_retrasada_1='',
                alumnos_retrasada_2='',
                lab_aprobados='',
                lab_reprobados='',
                lab_media='',
                lab_promedio='',
                media='',
                error_tipico='',
                mediana='',
                moda='',
                desviacion_estandar='',
                varianza='',
                curtosis='',
                coeficiente='',
                rango='',
                minimo='',
                maximo='',
                total='',
                reprobados='',
                aprobados='',
                promedio=''
            ) 
}}
{{include 'include/log-final-metrics.html'}}

<!-- log-new-desertion-activity -->
{{inc_vars = dict(
                id='log-new-desertion-activity',
                url=URL('desertions/save', vars=dict(report=report.id)),
                desertion_started='',
                desertion_gone='',
                desertion_continued=''
            ) 
}}
{{include 'include/log-desertion-activity.html'}}

<!-- log-new-metrics-activity -->
{{inc_vars = dict(
                id='log-new-metrics-activity',
                url=URL('metrics/save', vars=dict(report=report.id)),
                description='',
                date='',
                metrics_t=None,
                metrics_type=metrics_type,
                media='',
                error_tipico='',
                mediana='',
                moda='',
                desviacion_estandar='',
                varianza='',
                curtosis='',
                coeficiente='',
                rango='',
                minimo='',
                maximo='',
                total='',
                reprobados='',
                aprobados=''
            )
}}
{{include 'include/log-metrics-activity.html'}}

<!-- log-new-activity -->
{{inc_vars = dict(
                id='log-new-activity',
                url=URL('log/save', vars=dict(report=report.id)),
                date='',
                log_type=None,
                log_types=log_types,
                content=''
            )
}}
{{include 'include/log-activity.html'}}

<!-- log-new-future-activity -->
{{inc_vars = dict(
                id='log-new-future-activity',
                url=URL('log_future/save', vars=dict(report=report.id)),
                date='',
                log_type=None,
                content=''
            )
}}
{{include 'include/log-future-activity.html'}}

<!-- report-head-activity -->
{{inc_vars = dict(
                id='report-header-new',
                url=URL('report_header/create', vars=dict(report=report.id)),
                title=T('Report Header'),
                content=''
            ) 
}}
{{include 'include/report-header.html'}}

<!-- report-footer-activity -->
{{inc_vars = dict(
                id='report-footer-new',
                url=URL('report_footer/create', vars=dict(report=report.id)),
                title=T('Report Footer'),
                content=''
            )
}}
{{include 'include/report-header.html'}}

<!-- report-hours-activity -->
{{inc_vars = dict(
                id='log-accomplished-hours',
                hours='',
                url=URL('report_hours/create', vars=dict(report=report.id)),
                title=T('Report Hours')
            )
}}
{{include 'include/report-hours-activity.html'}}

<!-- Helpers for asking something before it happens and may be ireversible -->
{{if minimal_requirements:}}
    {{inc_vars = dict(
                    id='report-grading-check',
                    title="Confirmar enviar a calificar",
                    content=T('This operation can\'t be undone, do you want to continue?'),
                    action=T('Confirm'),
                    _class='btn-primary',
                    url=URL('student','report/acceptance', vars=dict(report = report.id))
                )
    }}
    {{include 'include/delete-helper.html'}}
{{else:}}
    {{inc_vars = dict(
                    id='report-grading-check',
                    title=T('Can\'t Send to Grading'),
                    content=f"No todos los bloques obligatorios de su reporte han sido ingresados. Verifique que posea los siguientes bloques como minimo: {mandatory_requirements}",
                    action = T('Send to Grading'),
                    _class = 'btn-primary disabled',
                    url = '#'
                )
    }}
    {{include 'include/delete-helper.html'}}
{{pass}}

<!-- // Helpers for deletion -->
<!-- Helpers end here -->
<div class="row-fluid mt-4">
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav">
                <li class="nav-item active">
                    <a class="nav-link" href="#">Editar: {{=report.report_restriction['name']}}<span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item">
                    <a style="color:white;text-shadow:none;" class="nav-link" data-toggle="modal" href="#report-grading-check">
                        <span class="icon-check"></span> Enviar a calificar
                    </a>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        Agregar bloque
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                        {{if report.heading is None or report.footer is None:}}
                            <h6 class="dropdown-header">Comunes</h6>
                        {{pass}}
                        
                        {{if report.heading is None:}}
                            <a class="dropdown-item" data-toggle="modal" href="#report-header-new" title="{{=T('Consisting of introduction, objectives, scope, etc.')}}">
                                <span class="icon-align-left"></span> Encabezado
                            </a>
                        {{pass}}
                        
                        {{if report.footer is None:}}
                            <a class="dropdown-item" data-toggle="modal" href="#report-footer-new" title="{{=T('Consisting of conclusions, recommendations, etc.')}}">
                                <span class="icon-align-left"></span> Pie de reporte
                            </a>
                        {{pass}}
                        
                        <!--#********************************************************************************-->
                        <!--#******************************PHASE 2 DTT***************************************-->
                        {{if report.assignation.project.area_level.name == 'DTT Tutor Académico':}}
                            <h6 class="dropdown-header">Actividades generales</h6>
                            <a class="dropdown-item" data-toggle="modal" href="#log-new-activity">
                                <span class="icon-tasks"></span> Registrar anomalia
                            </a>
                            <a class="dropdown-item" target="_blank" title="{{=T('Register activity or activity metric')}}" href="{{=URL('activity_control', 'students_control', vars=dict(project=report.assignation.project, period=report.assignation.period))}}">
                                <span class="icon-adjust"></span> Registrar actividad
                            </a>
                        {{else:}}
                            <h6 class="dropdown-header">Actividades generales</h6>
                            <a class="dropdown-item" data-toggle="modal" href="#log-new-activity">
                                <span class="icon-tasks"></span> Registrar actividad
                            </a>
                            <a class="dropdown-item" data-toggle="modal" href="#log-new-future-activity">
                                <span class="icon-time"></span> Registrar actividad futura
                            </a>
                            <h6 class="dropdown-header">Actividades de auxiliar</h6>
                            <a class="dropdown-item" data-toggle="modal" href="#log-new-metrics-activity">
                                <span class="icon-adjust"></span> Registrar actividad con métricas
                            </a>
                        {{pass}}

                        <!--#********************************************************************************-->
                        <!--#******************************PHASE 2 DTT***************************************-->
                        {{if report.desertion_started is None:}}
                            <h6 class="dropdown-header">Registrar deserciones</h6>
                            <a class="dropdown-item" data-toggle="modal" href="#log-new-desertion-activity">
                                <span class="icon-user"></span> Registrar deserciones
                            </a>
                        {{pass}}

                        <!--#********************************************************************************-->
                        <!--#******************************PHASE 2 DTT***************************************-->
                        {{if report.assignation.project.area_level.name != 'DTT Tutor Académico':}}
                            {{if report.report_restriction.is_final and db(db.log_final.report == report.id).count() == 0:}}
                                <h6 class="dropdown-header">Reporte final</h6>
                                <a class="dropdown-item" data-toggle="modal" href="#log-final-statistics">
                                    <span class="icon-flag"></span> {{=T('Log Final Statistics')}}
                                </a>     
                            {{pass}}
                        {{pass}}

                        <!--#********************************************************************************-->
                        <!--#******************************PHASE 2 DTT***************************************-->
                        {{if report.hours is None:}}
                            <h6 class="dropdown-header">{{=T('Other Activities')}}</h6>
                            <a class="dropdown-item" data-toggle="modal" href="#log-accomplished-hours">
                                <span class="icon-time"></span> {{=T('Log Accomplished Hours')}}
                            </a>
                        {{pass}}
                    </div>
                </li>
            </ul>
        </div>
    </nav>
</div>
  
<div class="mt-2 border-report">
    {{if report.heading is not None:}}
        <!-- report-head-edit-activity -->
        {{inc_vars = dict(
                        id='report-header-edit',
                        url=URL('report_header/update', vars=dict(report = report.id)),
                        title=T('Report Header'),
                        content=report.heading
                    )
        }}
        {{include 'include/report-header.html'}}
        <!-- Helpers for deletion -->
        {{inc_vars = dict(
                        id='report-header-delete',
                        title="Confirmar eliminar",
                        content=T('Delete operation can\'t be undone, do you want to continue?'),
                        action=T('Delete'),
                        _class='btn-danger',
                        url=URL('report_header/delete', vars=dict(report = report.id))
                    )
        }}
        {{include 'include/delete-helper.html'}}
        <!-- // Helpers for deletion -->
        <!-- Display Helper -->
        {{inc_vars = dict(
                        editable=True,
                        edit_action='report-header-edit',
                        delete_action='report-header-delete',
                        content=MARKMIN(report.heading, markmin_settings)
                    )
        }}
        {{include 'include/display-report-header.html'}}
        <!-- //Display Helper -->
    {{pass}}
    <div class="container">
        <div class="row-fluid">
            <div style="padding:15px;">
                <h1>
                    <span class="icon-tasks"></span>
                    Registro de actividades
                </h1>
                <span>
                    <span><strong>Total de anomalías:</strong> {{=anomalies}} </span> |
                    <!--#********************************************************************************-->
                    <!--#******************************PHASE 2 DTT***************************************-->
                    {{if report.assignation.project.area_level.name == 'DTT Tutor Académico':}}
                        <span><strong>Total de actividades registradas:</strong> {{=len(activities_wm) + len(activities_m)}} </span>
                    {{else:}}
                        <span><strong>Total de actividades registradas:</strong> {{=len(logs)}} </span>
                    {{pass}}
                    <!--#********************************************************************************-->
                    <!--#******************************PHASE 2 DTT***************************************-->
                </span>
            </div>
        </div>
        <div class="row-fluid">
            <!--#********************************************************************************-->
            <!--#******************************PHASE 2 DTT***************************************-->
            {{if report.assignation.project.area_level.name != 'DTT Tutor Académico':}}
                {{for log in logs:}}
                    <!-- Helpers for Edition -->
                    {{inc_vars = dict(
                                    id=f"log-edit-activity-{log.id}",
                                    url=URL('log/update', vars=dict(log = log.id)),
                                    date=log.entry_date,
                                    log_type=log.log_type,
                                    log_types=log_types,
                                    content=log.description
                                )
                    }}
                    {{include 'include/log-activity.html'}}
                    <!-- // Helpers for Edition -->
                    <!-- Helpers for deletion -->
                    {{inc_vars = dict(
                                    id=f'delete-log-{log.id}',
                                    title=f"{T('Confirm')} {T('Delete')}",
                                    content=T('Delete operation can\'t be undone, do you want to continue?'),
                                    action=T('Delete'),
                                    _class='btn-danger',
                                    url=URL('log/delete', vars=dict(log = log.id))
                                )
                    }}
                    {{include 'include/delete-helper.html'}}
                    <!-- // Helpers for deletion -->
                    <!-- Display Helper -->
                    {{inc_vars = dict(
                                    editable=True,
                                    anomaly=(log.log_type['name'] == 'Anomaly'),
                                    log_type=T(log.log_type['name']),
                                    date=log.entry_date,
                                    edit_action=f'log-edit-activity-{log.id}',
                                    delete_action=f'delete-log-{log.id}',
                                    content=MARKMIN(log.description, markmin_settings)
                                )
                    }}
                    {{include 'include/display-report-log.html'}}
                    <!-- //Display Helper -->
                {{pass}}
            {{else:}}
                {{for log in logs:}}
                    <!-- Helpers for Edition -->
                    {{inc_vars = dict(
                                    id=f'log-edit-activity-{log.id}',
                                    url=URL('log/update', vars=dict(log = log.id)),
                                    date=log.entry_date,
                                    log_type=log.log_type,
                                    log_types=log_types,
                                    content=log.description
                                )
                    }}
                    {{include 'include/log-activity.html'}}
                    <!-- // Helpers for Edition -->
                    <!-- Helpers for deletion -->
                    {{inc_vars = dict(
                                    id=f'delete-log-{log.id}',
                                    title=f"{T('Confirm')} {T('Delete')}",
                                    content=T('Delete operation can\'t be undone, do you want to continue?'),
                                    action=T('Delete'),
                                    _class='btn-danger',
                                    url=URL('log/delete', vars=dict(log = log.id))
                                )
                    }}
                    {{include 'include/delete-helper.html'}}
                    <!-- // Helpers for deletion -->
                    <!-- Display Helper -->
                    {{inc_vars = dict(
                                    editable=True,
                                    anomaly=(log.log_type['name'] == 'Anomaly'),
                                    log_type=T(log.log_type['name']),
                                    date=log.entry_date,
                                    edit_action=f'log-edit-activity-{log.id}',
                                    delete_action=f'delete-log-{log.id}',
                                    content=MARKMIN(log.description, markmin_settings)
                                )
                    }}
                    {{include 'include/display-report-log.html'}}
                    <!-- //Display Helper -->
                {{pass}}

                <!--ACTIVITIES WITHOUT METRIC-->
                {{for awm in activities_wm:}}
                    {{inc_vars = dict(
                                    editable=False,
                                    anomaly=False,
                                    log_type=T('Activity'),
                                    date=awm.date_start,
                                    edit_action=None,
                                    delete_action=None,
                                    content=MARKMIN(f'Nombre: "{awm.name}" Descripción: "{awm.description}"', markmin_settings)
                                )
                    }}
                    {{include 'include/display-report-log.html'}}
                {{pass}}
                <!--ACTIVITIES WITHOUT METRIC-->

                <!--ACTIVITIES WITH METRIC-->
                {{for awm in activities_m:}}
                    {{inc_vars = dict(
                                    editable=False,
                                    anomaly=False,
                                    log_type=T('Activity'),
                                    date=awm[0],
                                    edit_action=None,
                                    delete_action=None,
                                    content=MARKMIN(awm[1], markmin_settings)
                                )
                    }}
                    {{include 'include/display-report-log.html'}}
                {{pass}}
                <!--ACTIVITIES WITH METRIC-->
            {{pass}}
            <!--#********************************************************************************-->
            <!--#******************************PHASE 2 DTT***************************************-->
        </div>
        <hr />
        <div class="row-fluid">
            <div style="padding:15px;">
                <h1>
                    <span class="icon-adjust"></span>
                    <strong>Registro de actividades con métricas</strong>
                </h1>
                <span>
                    <span>
                        <!--#****************************************************************************-->
                        <!--#****************************PHASE 2 DTT*************************************-->
                        {{if report.assignation.project.area_level.name == 'DTT Tutor Académico':}}
                            <strong>Total de registros de actividades:</strong> {{=len(activities_m)}}
                        {{else:}}
                            <strong>Total de registros de actividades:</strong> {{=len(metrics)}}
                        {{pass}}
                        <!--#****************************************************************************-->
                        <!--#****************************PHASE 2 DTT*************************************-->
                    </span>
                </span>
            </div>
        </div>
        <div class="row-fluid part-1">
            <!--ACTIVITY WITHOUT METRIC-->
            {{if report.assignation.project.area_level.name == 'DTT Tutor Académico':}}
                <!-- Display {{activities_m}} -->
                {{for metric in activities_m:}}
                    <!-- Display Helper -->
                    {{inc_vars = dict(editable=False, metric=metric, edit_action=None, delete_action=None)}}
                    {{include 'include/display-report-metric.html'}}
                    <!-- Display Helper -->
                {{pass}}
            {{else:}}
                {{for metric in metrics:}}
                    <!-- Metric edit Helper-->
                    {{inc_vars = dict(
                                    id=f'metric-edit-activity-{metric.id}',
                                    url=URL('metrics/update', vars=dict(metric=metric.id)),
                                    description=metric.description,
                                    date=metric.created,
                                    metrics_t=metric.metrics_type,
                                    metrics_type=metrics_type,
                                    media=metric.media,
                                    error_tipico=metric.error,
                                    mediana=metric.mediana,
                                    moda=metric.moda,
                                    desviacion_estandar=metric.desviacion,
                                    varianza=metric.varianza,
                                    curtosis=metric.curtosis,
                                    coeficiente=metric.coeficiente,
                                    rango=metric.rango,
                                    minimo=metric.minimo,
                                    maximo=metric.maximo,
                                    total=metric.total,
                                    reprobados=metric.reprobados,
                                    aprobados=metric.aprobados
                                )
                    }}
                    {{include 'include/log-metrics-activity.html'}}
                    <!-- //Metric edit Helper-->
                    <!-- Metric delete Helper-->
                    {{inc_vars = dict(
                                    id=f'delete-metric-{metric.id}',
                                    title=f"{T('Confirm')} {T('Delete')}",
                                    content=T('Delete operation can\'t be undone, do you want to continue?'),
                                    action=T('Delete'),
                                    _class='btn-danger',
                                    url=URL('metrics/delete', vars=dict(metric=metric.id))
                                )
                    }}
                    {{include 'include/delete-helper.html'}}
                    <!-- //Metric delete Helper-->
                    <!-- Display Helper -->
                    {{inc_vars = dict(
                                    editable=True,
                                    metric=metric,
                                    edit_action=f'metric-edit-activity-{metric.id}',
                                    delete_action=f'delete-metric-{metric.id}'
                                )
                    }}
                    {{include 'include/display-report-metric.html'}}
                    <!-- //Display Helper -->
                {{pass}}
            {{pass}}

            <!--FINAL LOG-->
            {{for final_element in final_r:}}
                {{print("final", final_element)}}
                <!-- Final Report edit Helper hola-->
                {{inc_vars = dict(
                                id=f'final-edit-activity-{final_element.id}',
                                url=URL('final/update', vars=dict(final=final_element.id)),
                                date=final_element.curso_created,
                                alumnos_actas=final_element.curso_asignados_actas,
                                alumnos_parciales=final_element.curso_en_parciales,
                                alumnos_final=final_element.curso_en_final,
                                alumnos_retrasada_1=final_element.curso_en_primera_restrasada,
                                alumnos_retrasada_2=final_element.curso_en_segunda_restrasada,
                                lab_aprobados=final_element.lab_aprobados,
                                lab_reprobados=final_element.lab_reprobados,
                                lab_media=final_element.lab_media,
                                lab_promedio=final_element.lab_promedio,
                                media=final_element.curso_media,
                                error_tipico=final_element.curso_error,
                                mediana=final_element.curso_mediana,
                                moda=final_element.curso_moda,
                                desviacion_estandar=final_element.curso_desviacion,
                                varianza=final_element.curso_varianza,
                                curtosis=final_element.curso_curtosis,
                                coeficiente=final_element.curso_coeficiente,
                                rango=final_element.curso_rango,
                                minimo=final_element.curso_minimo,
                                maximo=final_element.curso_maximo,
                                total=final_element.curso_total,
                                reprobados=final_element.curso_reprobados,
                                aprobados=final_element.curso_aprobados,
                                promedio=final_element.curso_promedio
                            )
                }}
                {{include 'include/log-final-metrics.html'}}
                <!-- //Final Report edit Helper-->
                <!-- Final Report delete Helper-->
                {{inc_vars = dict(
                                id=f'delete-final-{final_element.id}',
                                title="Confirmar eliminar",
                                content=T('Delete operation can\'t be undone, do you want to continue?'),
                                action=T('Delete'),
                                _class='btn-danger',
                                url=URL('final/delete', vars=dict(final=final_element.id))
                            )
                }}
                {{include 'include/delete-helper.html'}}
                <!-- //Final Report delete Helper-->
                <!-- Display Helper -->
                {{if report.assignation.project.area_level.name != 'DTT Tutor Académico' or (report.assignation.project.area_level.name == 'DTT Tutor Académico' and final_stats_flag):}}
                    {{if report.assignation.project.area_level.name == 'DTT Tutor Académico':}}
                        {{inc_vars = dict(
                                        editable=True,
                                        final=final_element,
                                        edit_action=f'final-edit-activity-{final_element.id}',
                                        delete_action=None
                                    )
                        }}
                        {{include 'include/display-final-report.html'}}
                    {{else:}}
                        {{inc_vars = dict(
                                        editable=True,
                                        final=final_element,
                                        edit_action=f'final-edit-activity-{final_element.id}',
                                        delete_action=f'delete-final-{final_element.id}'
                                    )
                        }}
                        {{include 'include/display-final-report.html'}}
                    {{pass}}
                {{else:}}
                    {{inc_vars = dict(
                                    editable=False,
                                    final=final_element,
                                    edit_action=None,
                                    delete_action=None
                                )
                    }}
                    {{include 'include/display-final-report.html'}}
                {{pass}}
                <!-- //Display Helper -->
            {{pass}}
            <!--FINAL LOG-->
            <!--#****************************************************************************-->
            <!--#****************************PHASE 2 DTT*************************************-->
        </div>
        <hr />
        {{if report.desertion_started is not None:}}
            <div class="row-fluid">
                <div style="padding:15px;">
                    <h1>
                        <span class="icon-user"></span>
                        <strong>{{=T('Desertion logs')}}</strong>
                    </h1>
                </div>
            </div>
            <div class="row-fluid">
                <!-- Desertion edit Helper-->
                {{inc_vars = dict(
                                id='desertion-edit-activity',
                                url=URL('desertions/update', vars=dict(report=report.id)),
                                desertion_started=report.desertion_started,
                                desertion_gone=report.desertion_gone,
                                desertion_continued=report.desertion_continued
                            )
                }}
                {{include 'include/log-desertion-activity.html'}}
                <!-- //Desertion edit Helper-->
                <!-- Desertion delete Helper-->
                {{inc_vars = dict(
                                id='delete-desertion',
                                title=f"{T('Confirm')} {T('Delete')}",
                                content=T('Delete operation can\'t be undone, do you want to continue?'),
                                action=T('Delete'),
                                _class='btn-danger',
                                url=URL('desertions/delete', vars=dict(report=report.id))
                            )
                }}
                {{include 'include/delete-helper.html'}}
                <!-- //Desertion delete Helper-->
                <!-- Desertion Display Helper -->
                {{inc_vars = dict(
                                editable=True,
                                id='display-desertion',
                                reports=assignation_reports,
                                desertion_started=report.desertion_started,
                                desertion_gone=report.desertion_gone,
                                desertion_continued=report.desertion_continued,
                                edit_action='desertion-edit-activity',
                                delete_action='delete-desertion'
                            )
                }}
                {{include 'include/display-report-desertion.html'}}
                <!-- //Desertion Display Helper -->
            </div>
        {{pass}}
        {{if not(report.hours is None):}}
            <div class="row-fluid">
                <div style="padding:15px;">
                    <h1>
                        <span class="icon-time"></span>
                        <strong>{{=T('Accomplished Hours')}}</strong>
                    </h1>
                </div>
            </div>
            <div class="row-fluid">
                <!-- Accomplished Hours edit Helper-->
                {{inc_vars = dict(
                                id='edit-accomplished-hours',
                                hours=report.hours,
                                url=URL('report_hours/update', vars=dict(report=report.id)),
                                title=T('Report Hours')
                            )
                }}
                {{include 'include/report-hours-activity.html'}}
                <!-- //Accomplished Hours edit Helper-->
                <!-- Accomplished Hours delete Helper-->
                {{inc_vars = dict(
                                id='delete-accomplished-hours',
                                title=f"{T('Confirm')} {T('Delete')}",
                                content=T('Delete operation can\'t be undone, do you want to continue?'),
                                action=T('Delete'),
                                _class='btn-danger',
                                url=URL('report_hours/delete', vars=dict(report=report.id))
                            )
                }}
                {{include 'include/delete-helper.html'}}
                <!-- //Accomplished Hours delete Helper-->
                <!-- Accomplished Hours display Helper-->
                {{inc_vars = dict(
                                editable=True,
                                id='display-report-hours',
                                reports=assignation_reports,
                                edit_action='edit-accomplished-hours',
                                delete_action='delete-accomplished-hours'
                            )
                }}
                {{include 'include/display-report-hours.html'}}
                <!-- //Accomplished Hours display Helper-->
            </div>
        {{pass}}
        <div class="row-fluid">
            <div style="padding:15px;">
                <h1>
                    <span class="icon-time"></span>
                    {{=T('Future Activities Log')}}
                </h1>
            </div>
        </div>
        <div class="row-fluid">
            <!--#****************************************************************************-->
            <!--#****************************PHASE 2 DTT*************************************-->
            {{if report.assignation.project.area_level.name == 'DTT Tutor Académico':}}
                {{for log in activities_f:}}
                    <!-- Display Helper -->
                    {{inc_vars = dict(
                                    editable=False,
                                    date=log.date_start,
                                    edit_action=None,
                                    delete_action=None,
                                    content=MARKMIN(f'Nombre: "{log.name}" Descripción: "{log.description}"', markmin_settings)
                                )
                    }}
                    {{include 'include/display-report-log-future.html'}}
                    <!-- //Display Helper -->
                {{pass}}
            {{else:}}
                {{for log in report.log_future.select():}}
                    <!-- Helpers for Edition -->
                    {{inc_vars = dict(
                                    id=f'log-future-edit-activity-{log.id}',
                                    url=URL('log_future/update', vars=dict(log=log.id)),
                                    date=log.entry_date,
                                    content=log.description
                                )
                    }}
                    {{include 'include/log-future-activity.html'}}
                    <!-- // Helpers for Edition -->
                    <!-- Helpers for deletion -->
                    {{inc_vars = dict(
                                    id=f'delete-log-future-{log.id}',
                                    title=f"{T('Confirm')} {T('Delete')}",
                                    content=T('Delete operation can\'t be undone, do you want to continue?'),
                                    action=T('Delete'),
                                    _class='btn-danger',
                                    url=URL('log_future/delete', vars=dict(log=log.id))
                                )
                    }}
                    {{include 'include/delete-helper.html'}}
                    <!-- // Helpers for deletion -->
                    <!-- Display Helper -->
                    {{inc_vars = dict(
                                    editable=True,
                                    date=log.entry_date,
                                    edit_action=f'log-future-edit-activity-{log.id}',
                                    delete_action=f'delete-log-future-{log.id}',
                                    content=MARKMIN(log.description, markmin_settings)
                                )
                    }}
                    {{include 'include/display-report-log-future.html'}}
                    <!-- //Display Helper -->
                {{pass}}
            {{pass}}
            <!--#****************************************************************************-->
            <!--#****************************PHASE 2 DTT*************************************-->
        </div>
    </div>
    {{if not(report.footer is None):}}
        <!-- report-footer-edit-activity -->
        {{inc_vars = dict(
                        id='report-footer-edit',
                        url=URL('report_footer/update', vars=dict(report=report.id)),
                        title=T('Report Footer'),
                        content=report.footer
                    )
        }}
        {{include 'include/report-header.html'}}
        <!-- Helpers for deletion -->
        {{inc_vars = dict(
                        id='report-footer-delete',
                        title=f"{T('Confirm')} {T('Delete')}",
                        content=T('Delete operation can\'t be undone, do you want to continue?'),
                        action=T('Delete'),
                        _class='btn-danger',
                        url=URL('report_footer/delete', vars=dict(report=report.id))
                    )
        }}
        {{include 'include/delete-helper.html'}}
        <!-- // Helpers for deletion -->
        <!-- Display Helper -->
        {{inc_vars = dict(
                        editable=True,
                        edit_action='report-footer-edit',
                        delete_action='report-footer-delete',
                        content=MARKMIN(report.footer, markmin_settings)
                    )
        }}
        {{include 'include/display-report-header.html'}}
        <!-- //Display Helper -->
    {{pass}}
</div>
<!-- Enable Markmin in textarea -->

<!-- //Enable Markmin in textarea -->
{{block page_js}}
<script src="https://code.jquery.com/jquery-migrate-1.2.1.js"></script>
<script type="text/javascript" src="{{=URL('static','markitup')}}/jquery.markitup.pack.js"></script>
<script type="text/javascript" src="{{=URL('static','markitup')}}/sets/markmin/set.js"></script>
<script type="text/javascript" src="{{=URL('static','js')}}/highcharts/js/highcharts.js"></script>
<script type="text/javascript" src="{{=URL('static','js')}}/highcharts/js/modules/data.js"></script>
<script type="text/javascript" src="{{=URL('static','js')}}/highcharts/js/modules/exporting.js"></script>
<link rel="stylesheet" type="text/css" href="{{=URL('static','markitup')}}/skins/markitup/style.css"/>
<link rel="stylesheet" type="text/css" href="{{=URL('static','markitup')}}/sets/markmin/style.css"/>
<script>
    jQuery(document).ready(function() {
      jQuery('textarea').css('width','100%').css('height','200px').markItUp(mySettings);
    });
    </script>
{{end page_js}}